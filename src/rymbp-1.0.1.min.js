!function(_){var E={};function t(e){if(E[e])return E[e].exports;var r=E[e]={i:e,l:!1,exports:{}};return _[e].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=_,t.c=E,t.d=function(_,E,e){t.o(_,E)||Object.defineProperty(_,E,{configurable:!1,enumerable:!0,get:e})},t.r=function(_){Object.defineProperty(_,"__esModule",{value:!0})},t.n=function(_){var E=_&&_.__esModule?function(){return _.default}:function(){return _};return t.d(E,"a",E),E},t.o=function(_,E){return Object.prototype.hasOwnProperty.call(_,E)},t.p="",t(t.s=1)}([function(_,E){!function(_){"use strict";if(!_.fetch){var E={searchParams:"URLSearchParams"in _,iterable:"Symbol"in _&&"iterator"in Symbol,blob:"FileReader"in _&&"Blob"in _&&function(){try{return new Blob,!0}catch(_){return!1}}(),formData:"FormData"in _,arrayBuffer:"ArrayBuffer"in _};if(E.arrayBuffer)var t=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],e=function(_){return _&&DataView.prototype.isPrototypeOf(_)},r=ArrayBuffer.isView||function(_){return _&&t.indexOf(Object.prototype.toString.call(_))>-1};a.prototype.append=function(_,E){_=i(_),E=T(E);var t=this.map[_];this.map[_]=t?t+","+E:E},a.prototype.delete=function(_){delete this.map[i(_)]},a.prototype.get=function(_){return _=i(_),this.has(_)?this.map[_]:null},a.prototype.has=function(_){return this.map.hasOwnProperty(i(_))},a.prototype.set=function(_,E){this.map[i(_)]=T(E)},a.prototype.forEach=function(_,E){for(var t in this.map)this.map.hasOwnProperty(t)&&_.call(E,this.map[t],t,this)},a.prototype.keys=function(){var _=[];return this.forEach(function(E,t){_.push(t)}),s(_)},a.prototype.values=function(){var _=[];return this.forEach(function(E){_.push(E)}),s(_)},a.prototype.entries=function(){var _=[];return this.forEach(function(E,t){_.push([t,E])}),s(_)},E.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var n=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];I.prototype.clone=function(){return new I(this,{body:this._bodyInit})},A.call(I.prototype),A.call(u.prototype),u.prototype.clone=function(){return new u(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},u.error=function(){var _=new u(null,{status:0,statusText:""});return _.type="error",_};var o=[301,302,303,307,308];u.redirect=function(_,E){if(-1===o.indexOf(E))throw new RangeError("Invalid status code");return new u(null,{status:E,headers:{location:_}})},_.Headers=a,_.Request=I,_.Response=u,_.fetch=function(_,t){return new Promise(function(e,r){var n=new I(_,t),o=new XMLHttpRequest;o.onload=function(){var _,E,t={status:o.status,statusText:o.statusText,headers:(_=o.getAllResponseHeaders()||"",E=new a,_.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(_){var t=_.split(":"),e=t.shift().trim();if(e){var r=t.join(":").trim();E.append(e,r)}}),E)};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var r="response"in o?o.response:o.responseText;e(new u(r,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(n.method,n.url,!0),"include"===n.credentials?o.withCredentials=!0:"omit"===n.credentials&&(o.withCredentials=!1),"responseType"in o&&E.blob&&(o.responseType="blob"),n.headers.forEach(function(_,E){o.setRequestHeader(E,_)}),o.send(void 0===n._bodyInit?null:n._bodyInit)})},_.fetch.polyfill=!0}function i(_){if("string"!=typeof _&&(_=String(_)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(_))throw new TypeError("Invalid character in header field name");return _.toLowerCase()}function T(_){return"string"!=typeof _&&(_=String(_)),_}function s(_){var t={next:function(){var E=_.shift();return{done:void 0===E,value:E}}};return E.iterable&&(t[Symbol.iterator]=function(){return t}),t}function a(_){this.map={},_ instanceof a?_.forEach(function(_,E){this.append(E,_)},this):Array.isArray(_)?_.forEach(function(_){this.append(_[0],_[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(E){this.append(E,_[E])},this)}function B(_){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}function O(_){return new Promise(function(E,t){_.onload=function(){E(_.result)},_.onerror=function(){t(_.error)}})}function R(_){var E=new FileReader,t=O(E);return E.readAsArrayBuffer(_),t}function N(_){if(_.slice)return _.slice(0);var E=new Uint8Array(_.byteLength);return E.set(new Uint8Array(_)),E.buffer}function A(){return this.bodyUsed=!1,this._initBody=function(_){if(this._bodyInit=_,_)if("string"==typeof _)this._bodyText=_;else if(E.blob&&Blob.prototype.isPrototypeOf(_))this._bodyBlob=_;else if(E.formData&&FormData.prototype.isPrototypeOf(_))this._bodyFormData=_;else if(E.searchParams&&URLSearchParams.prototype.isPrototypeOf(_))this._bodyText=_.toString();else if(E.arrayBuffer&&E.blob&&e(_))this._bodyArrayBuffer=N(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!E.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(_)&&!r(_))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=N(_)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof _?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):E.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},E.blob&&(this.blob=function(){var _=B(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?B(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(R)}),this.text=function(){var _,E,t,e=B(this);if(e)return e;if(this._bodyBlob)return _=this._bodyBlob,E=new FileReader,t=O(E),E.readAsText(_),t;if(this._bodyArrayBuffer)return Promise.resolve(function(_){for(var E=new Uint8Array(_),t=new Array(E.length),e=0;e<E.length;e++)t[e]=String.fromCharCode(E[e]);return t.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},E.formData&&(this.formData=function(){return this.text().then(M)}),this.json=function(){return this.text().then(JSON.parse)},this}function I(_,E){var t,e,r=(E=E||{}).body;if(_ instanceof I){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,E.headers||(this.headers=new a(_.headers)),this.method=_.method,this.mode=_.mode,r||null==_._bodyInit||(r=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=E.credentials||this.credentials||"omit",!E.headers&&this.headers||(this.headers=new a(E.headers)),this.method=(t=E.method||this.method||"GET",e=t.toUpperCase(),n.indexOf(e)>-1?e:t),this.mode=E.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function M(_){var E=new FormData;return _.trim().split("&").forEach(function(_){if(_){var t=_.split("="),e=t.shift().replace(/\+/g," "),r=t.join("=").replace(/\+/g," ");E.append(decodeURIComponent(e),decodeURIComponent(r))}}),E}function u(_,E){E||(E={}),this.type="default",this.status=void 0===E.status?200:E.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in E?E.statusText:"OK",this.headers=new a(E.headers),this.url=E.url||"",this._initBody(_)}}("undefined"!=typeof self?self:this)},function(_,E,t){"use strict";Object.defineProperty(E,"__esModule",{value:!0});var e=Object.assign||function(_){for(var E=1;E<arguments.length;E++){var t=arguments[E];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(_[e]=t[e])}return _};t(0),window.rymbp={UserActionEvent:{UA_UNKNOWN:0,UA_OTHER:1,UA_PLAY:2,UA_END:3,UA_CLICK:4,UA_TOUCH_SCROLL:5,UA_TOUCH_DOWN:6,UA_SWIPE_CARD:7,UA_SWIPE_CARD_SUCCESS:8,UA_WX_SCAN:9,UA_WX_SCAN_SUCCESS:10,UA_WX_SCAN_EXCHANGE:11,UA_EXCHANGE_SUCCESS:12,UA_ZOOM_IN:13,UA_ZOOM_OUT:14,UA_ROTATE:15},Element:{E_UNKNOWN:0,E_OTHER:1,E_ADVERT_BT_HOME:10,E_FLOAT_ADVERT:50,E_INDEX_ADVERT:100,E_INDEX_NAVIGATE:101,E_INDEX_BRAND:102,E_INDEX_ACTIVITY:103,E_INDEX_MEMBER:104,E_INDEX_COUPON:105,E_INDEX_QRCODE:106,E_INDEX_SHOP:107,E_INDEX_SHOP_RECOMMEND:108,E_INDEX_CATEGORY:109,E_INDEX_CUSTOM:110,E_INDEX_MORE:111,E_BRAND_BT_CATEGORY:200,E_BRAND_BT_LETTER:201,E_BRAND_BT_FLOOR:202,E_BRAND_BT_BRAND:203,E_BRAND_BT_HOME:204,E_BRAND_LIST_CATEGORY:205,E_BRAND_LIST_LETTER:206,E_BRAND_LIST_FLOOR:207,E_BRAND_BT_ALL:208,E_BRAND_DETAIL_BT_NAVIGATE:220,E_BRAND_DETAIL_BT_BACK:221,E_BRAND_DETAIL_BT_COUPON:222,E_BRAND_DETAIL_BT_LINE:223,E_BRAND_DETAIL_BT_DESCRIPT:224,E_BRAND_DETAIL_DETAIL_BT_COUPON:225,E_BRAND_DETAIL_BT_DISCOUNT:226,E_FLOOR_BT_FACILITIES:300,E_FLOOR_BT_FLOOR:301,E_FLOOR_BT_SEARCH:302,E_FLOOR_BT_SEARCH_BACK:303,E_FLOOR_BT_SHOP:304,E_FLOOR_BT_RECOMMEN:305,E_FLOOR_BT_NAVIGATE:306,E_FLOOR_BT_DETAIL:307,E_FLOOR_BT_HOME:308,E_FLOOR_LIST_SEARCH:309,E_FLOOR_BT_COUPON:310,E_FLOOR_BT_BACK:311,E_FLOOR_BT_GO:312,E_ACTIVITY_BT_LIST:400,E_ACTIVITY_BT_DETAIL:401,E_ACTIVITY_BT_DETAIL_NEXT:402,E_ACTIVITY_BT_DETAIL_PREV:403,E_ACTIVITY_BT_DETAIL_BACK:404,E_ACTIVITY_BT_HOME:405,E_CUSTOM_BT_DETAIL_NEXT:501,E_CUSTOM_BT_DETAIL_PREV:502,E_CUSTOM_BT_HOME:503,E_MEMBER_POINTS_INQUIRE_BT_BACK:580,E_MEMBER_POINTS_INQUIRE_BT_REGISTER:581,E_MEMBER_POINTS_INQUIRE_BT_PHONE:582,E_MEMBER_POINTS_INQUIRE_BT_WECHAT:583,E_MEMBER_POINTS_INQUIRE_BT_PHONE_CONFIRM:584,E_MEMBER_POINTS_SELFSERVICE_BT_SCAN:590,E_MEMBER_POINTS_SELFSERVICE_BT_CONFIRM_LOGIN_INFO:591,E_MEMBER_POINTS_SELFSERVICE_BT_MODIFY_LOGIN_INFO:592,E_MEMBER_POINTS_SELFSERVICE_BT_COMPLETE_SCAN:593,E_MEMBER_POINTS_SELFSERVICE_BT_RESCAN:594,E_MEMBER_POINTS_SELFSERVICE_BT_RESUME_SCAN:595,E_MEMBER_POINTS_SELFSERVICE_BT_LOGOUT:596,E_MEMBER_POINTS_SELFSERVICE_BT_REUPLOAD:597,E_MEMBER_POINTS_BT_MALL:610,E_MEMBER_POINTS_BT_EXCHANGE:611,E_MEMBER_POINTS_BT_BACK:612,E_MEMBER_SIGN_BT_SIGN:700,E_MEMBER_SIGN_BT_BACK:701,E_MEMBER_RULE_BT_BACK:720,E_MEMBER_RULE_BT_NEXT:721,E_MEMBER_RULE_BT_PREV:722,E_MEMBER_EXCHANGE_BT_BACK:750,E_MEMBER_EXCHANGE_BT_EXCHANGE:751,E_MEMBER_EXCHANGE_BT_SMS:752,E_MEMBER_EXCHANGE_DETAIL_BT_MALL_TICKET:800,E_MEMBER_EXCHANGE_DETAIL_BT_MALL_SMS:801,E_MEMBER_EXCHANGE_DETAIL_BT_MALL_WECHAT:802,E_MEMBER_EXCHANGE_DETAIL_BT_MALL_SMS_EXCHANGE:803,E_MEMBER_EXCHANGE_DETAIL_BT_MALL_TICKET_EXCHANGE:804,E_MEMBER_EXCHANGE_DETAIL_BT_BACK:805,E_MEMBER_EXCHANGE_DETAIL_BT_EXCHAGE:806,E_MEMBER_EXCHANGE_DETAIL_BT_NEXT:807,E_MEMBER_EXCHANGE_DETAIL_BT_PREV:808,E_MEMBER_BT_HOME:1e3,E_MEMBER_BT_REGISTER:1001,E_MEMBER_BT_POINTS:1002,E_MEMBER_BT_RULES:1003,E_MEMBER_BT_MALL:1004,E_MEMBER_BT_PARKING:1005,E_MEMBER_BT_SIGN:1006,E_MEMBER_BT_SELF_HELP:1007,E_MEMBER_BT_CUSTOM:1008,E_MEMBER_BT_NEXT:1009,E_MEMBER_BT_PREV:1010,E_MEMBER_LOGIN_BT_MEMBER_SECURITY_CODE:1020,E_MEMBER_LOGIN_BT_MEMBER_SMS_LOGIN:1021,E_MEMBER_LOGIN_BT_MEMBER_LOGIN_RETYPE:1022,E_MEMBER_LOGIN_SWIPE_CARD:1023,E_MEMBER_LOGIN_SWIPE_CARD_SUCCESS:1024,E_MEMBER_LOGIN_WX_SCAN_LOGIN:1025,E_MEMBER_LOGIN_WX_SCAN_LOGIN_SUCCESS:1026,E_MEMBER_LOGIN_BT_MEMBER_LOGIN_WECHAT:1027,E_MEMBER_LOGIN_BT_MEMBER_LOGIN_SMS:1028,E_MEMBER_LOGIN_BT_MEMBER_LOGIN_CARD:1029,E_MEMBER_ENTRY_BT_MEMBER_HOME:1050,E_MEMBER_ENTRY_BT_REGISTER:1051,E_MEMBER_ENTRY_BT_POINTS:1052,E_MEMBER_ENTRY_BT_RULES:1053,E_MEMBER_ENTRY_BT_MALL:1054,E_MEMBER_ENTRY_BT_PARKING:1055,E_MEMBER_ENTRY_BT_SIGN:1056,E_MEMBER_ENTRY_BT_SELF_HELP:1057,E_MEMBER_ENTRY_BT_MEMBER_CUSTOM:1058,E_MEMBER_REGISTER_BT_BACK:1070,E_MEMBER_REGISTER_BT_GO_REGISTER:1071,E_MEMBER_REGISTER_BT_REGISTER:1072,E_MEMBER_REGISTER_BT_GO_SIGN:1073,E_MEMBER_REGISTER_BT_REREGISTER:1074,E_MEMBER_REGISTER_BT_RETYPE:1075,E_MEMBER_REGISTER_BT_SECURITY_CODE:1076,E_MEMBER_CUSTOM_BT_NEXT:1090,E_MEMBER_CUSTOM_BT_PREV:1091,E_PARKING_DETAIL_BT_PARKING_TICKET:1100,E_PARKING_DETAIL_BT_PARKING_SMS:1101,E_PARKING_DETAIL_BT_PARKING_WECHAT:1102,E_PARKING_DETAIL_BT_PARKING_SMS_EXCHANGE:1103,E_PARKING_DETAIL_BT_PARKING_TICKET_EXCHANGE:1104,E_PARKING_BT_PARKING_DETAIL:1120,E_PARKING_BT_PARKING_BACK:1125,E_PARKING_BT_PARKING_BT_NEXT:1126,E_PARKING_BT_PARKING_BT_PREV:1127,E_COUPON_BT_HOME:1200,E_COUPON_BT_COUPON_CATG_ALL:1201,E_COUPON_BT_COUPON_CATG:1202,E_COUPON_BT_COUPON_MINE:1203,E_COUPON_BT_COUPON_DETAIL:1204,E_COUPON_DETAIL_BT_HOME:1220,E_COUPON_DETAIL_BT_COUPON:1221,E_COUPON_DETAIL_BT_COUPON_BUY:1222,E_COUPON_MINE_BT_HOME:1240,E_COUPON_MINE_BT_COUPON:1241,E_COUPON_MINE_BT_SEND_COUPON_TO_PHONE:1242,E_COUPON_USER_LOGIN_BT_LOGIN:1260,E_COUPON_USER_LOGIN_BT_CLOSE:1261,E_COUPON_USER_LOGIN_BT_SMS:1262,E_COUPON_USER_SEND_BT_CLOSE:1270,E_COUPON_USER_SEND_BT_SEND:1271,E_COUPON_USER_GET_BT_CLOSE:1280,E_COUPON_USER_GET_BT_VIEW_OTHER_COUPON:1281,E_COUPON_USER_GET_BT_VIEW_MY_COUPON:1282,E_COUPON_USER_GET_BT_SMS:1283,E_COUPON_USER_GET_BT_GET_COUPON:1284,E_MARKETING_COUPON_BT_GET_COUPON_FROM_HOME:1290,E_MARKETING_COUPON_BT_GET_COUPON_FROM_LIST:1291,E_MARKETING_COUPON_BT_SEND_SMS:1292,E_MARKETING_COUPON_BT_GET_COUPON_FROM_LOGIN:1293,E_MARKETING_COUPON_BT_GET_COUPON_FROM_RECOMMEND:1294,E_MARKETING_COUPON_BT_FULLSCREEN_COUPON:1295,E_POP_BT_DETAIL_NEXT:1400,E_POP_BT_DETAIL_PREV:1401,E_POP_BT_DETAIL_MENU:1402,E_POP_BT_DETAIL_CLOSE:1403,E_S_SERVER_BT_BRAND:2e3,E_S_PLAY_BT_ICON:3e3,E_S_PLAY_BT_MORE:3001,E_S_PLAY_BT_ACTIVITY:3002,E_S_SHOPING_BT_PREV:4e3,E_S_SHOPING_BT_NEXT:4001,E_S_SHOPING_BT_DETAIL:4002,E_S_SHOPING_DETAIL_BT_BACK:4020,E_S_SHOPING_DETAIL_BT_PREV:4021,E_S_SHOPING_DETAIL_BT_NEXT:4022,E_S_SHOPING_DETAIL_BT_DESC:4023,E_S_SHOPING_DETAIL_BT_SERVICE:4024},Block:{BLOCK_UNKNOWN:0,BLOCK_OTHER:1,BLOCK_A:2,BLOCK_B:3,BLOCK_C:4,BLOCK_D:5},UserChannel:{USER_CHANNEL_UNKNOWN:0,USER_CHANNEL_OTHER:1,USER_CHANNEL_WECHAT:2,USER_CHANNEL_PHONE:3,USER_CHANNEL_MALL_LIFE:4,USER_CHANNEL_INTERACTIVE_SCREEN:5},data:{config:{}},uuid:function(){for(var _="a",E=1;E<=31;E++)_+=Math.floor(16*Math.random()).toString(16),8!=E&&12!=E&&16!=E&&20!=E||(_+="");return _+=""},config:function(_){this.data.config=_},upload:function(_){var E={};E.id=this.uuid(),E.timestamp=(new Date).getTime(),E.message_name="rongyi.terminal.log.TerminalEventInfo",_=_||{};var t=void 0;switch(this.data.config.env){case"dev":case"test":t="http://192.168.10.194:28082/terminal_log";break;case"online":t="http://logreport.rongyi.com/terminal_log";break;default:t="http://logreport.rongyi.com/terminal_log"}var r=e({},this.data.config,_);r.layout=1e3,r.id=this.uuid(),r.timestamp=(new Date).getTime(),r.env&&delete r.env,E.message_data=[r],this.checkParams(r).then(function(){fetch(t,{method:"POST",body:JSON.stringify(E),headers:{"Content-Type":"application/json"}}).then(function(_){console.log("success:","上报成功")}).catch(function(_){console.error("faild:","上报失败")})}).catch(function(_){console.log("error:",_)})},containValue:function(_,E){for(var t in _)if(_[t]===E)return!0;return!1},checkParams:function(_){var E=this;return new Promise(function(t,e){return _.mall_id?_.terminal_id?_.terminal_mac?_.layout_id?_.action?_.custom_page?_.custom_pag_name?void 0===_.channel||E.containValue(E.UserChannel,_.channel)?void 0===_.action||E.containValue(E.UserActionEvent,_.action)?void 0===_.element||E.containValue(E.Element,_.element)?t():e("非法的操作元素类型"):e("非法的操作目标类型"):e("非法的用户渠道"):e("页面名称必传."):e("页面标识必传."):e("操作目标类型必传."):e("模版id必传."):e("设备MAC必传."):e("设备点位必传."):e("商场编号必传.")})}},E.default=rymbp}]);